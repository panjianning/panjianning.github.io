import{f as e,u as t,g as a,h as l,A as s,i,B as n,C as r,D as o,E as d,j as u,k as c,o as m,l as h,b as p,w as g,e as f,m as v,n as _,t as y,G as w,p as b,F as k,q as x,c as $,s as j,v as z,x as E,I,y as M,z as G,a as T}from"./main.096359cf.js";import{G as L,a as C}from"./grid-item.0610693d.js";import{_ as W,H as q,a as A}from"./lang.vue_vue_type_script_setup_true_name_lang_lang.4457df68.js";import{I as B}from"./image.84bddd9f.js";const D=e=>(M("data-v-f1a02f6c"),e=e(),G(),e),F={class:"logo"},H=["href"],J=[D((()=>f("img",{src:A,alt:"TinyGimp"},null,-1)))],K=["href"],N=["href"],O={class:"header"},P={class:"title"},Q={class:"desc"},R=["href"],S={class:"mainImage"},U=["href"],V={key:0,class:"moreTemplate"},X=["href"],Y=D((()=>f("div",{style:{height:"16px"}},null,-1))),Z=T(e({__name:"index",setup(e){const{t:M}=t(),G=e=>_("template/"+e.id)+"/",T=a([]),A=a([]),D=a(""),Z=a(""),ee=a(""),te=a(""),ae=a(""),le=a(window.innerWidth),se=()=>{le.value=window.innerWidth},ie=l((()=>Math.max(2,Math.floor(le.value/300)))),ne=l((()=>{let e=Math.max(2,Math.floor(le.value/300));return`${Math.floor(le.value/e/2)}px`})),re=e=>{z(e).then((e=>{let t=e;A.value.length>0&&(t=e.filter((e=>e.tags.some((e=>A.value.includes(e)))&&e.id!=D.value))),T.value=t})).catch((e=>{T.value=[]}))};return s.info(""),i((()=>{window.addEventListener("resize",se);let e=n("template");if(D.value=e,Z.value=`https://www.tinygimp.com/mystatic/thumb/${e}.png`,""!=e){let t=s.info({content:M("loading_template"),duration:0,closable:!0,background:!0});r.get(`https://www.tinygimp.com/mystatic/gimp/template/${e}.json`).then((a=>{o(t);let l=a.data;var s;ee.value=l.title.split("|")[0],te.value=l.description,ae.value=(s={type:l.type,id:e},_(`${s.type}?id=${s.id}`)),document.title=l.title,document.documentElement.lang=l.lang||"en",d(l.description),l.tags&&(A.value=l.tags,re(u()))})).catch((e=>{o(t),s.error({content:M("load_template_failed"),duration:0,closable:!0,background:!0})}))}let t=u();re(t),document.addEventListener("langChange",(e=>{re(e.detail.lang)}))})),c((()=>{window.removeEventListener("resize",se)})),(e,t)=>{const a=E,l=q,s=B,i=I,n=L,r=C;return m(),h(k,null,[p(l,null,{default:g((()=>[f("div",F,[f("a",{href:v(_)("")},J,8,H)]),f("div",null,[f("a",{href:v(_)("edit/"),target:"_blank"},[p(a,{icon:"ios-link",type:"text"},{default:g((()=>[f("span",null,y(e.$t("editor")),1)])),_:1})],8,K)]),f("div",null,[f("a",{href:v(_)("text3d/"),target:"_blank"},[p(a,{icon:"ios-link",type:"text"},{default:g((()=>[f("span",null,y(e.$t("text3dGenerator")),1)])),_:1})],8,N)]),f("div",null,[p(W)])])),_:1}),f("div",O,[f("p",P,y(v(ee)),1),f("p",Q,y(v(te)),1),v(Z)?(m(),h("a",{key:0,href:v(ae)},[f("div",S,[p(s,{src:v(Z),width:"400px"},null,8,["src"])])],8,R)):w("",!0),f("a",{href:v(ae)},[p(a,{type:"success",class:"btn",size:"big",icon:"ios-link"},{default:g((()=>[b(y(e.$t("editTemplate")),1)])),_:1})],8,U)]),v(T).length>0?(m(),h("div",V,y(e.$t("moreTemplate")),1)):w("",!0),p(r,{border:!0,hover:!0,col:v(ie),padding:0},{default:g((()=>[(m(!0),h(k,null,x(v(T),(e=>(m(),$(n,{class:"templateItem",key:e.id,style:j("height:"+v(ne))},{default:g((()=>[f("a",{href:G(e),target:"_blank",style:j("height:"+v(ne))},[p(s,{src:e.thumb,fit:"contain",width:"100%",height:v(ne),alt:e.id,lazy:""},{error:g((()=>[p(i,{type:"ios-image-outline",size:"24"})])),_:2},1032,["src","height","alt"])],12,X)])),_:2},1032,["style"])))),128))])),_:1},8,["col"]),Y],64)}}}),[["__scopeId","data-v-f1a02f6c"]]);export{Z as default};
